<div
  class="main iframe canvas-item"
  [style]="externalStyle()"
  tabindex="0"
  [class.border]="editMode"
  [class.active]="editMode && (isFocused() || (isHovered() && !isDragging()))"
  [cdkDragDisabled]="!editMode"
  cdkDrag
  [cdkDragData]="data.id"
  (cdkDragStarted)="dragDropSvc.startCanvasDrag(data.id)"
  (cdkDragMoved)="onDragMoved($event)"
  [attr.data-id]="data.id"
  [ngClass]="dragDropSvc.dropIndicator(nodeSignal)"
>
  @if (editMode) {
    <div class="element-name">{{ data.name }}</div>
    <div class="drag-placeholder" *cdkDragPlaceholder></div>
    <div cdkDragHandle class="drag-handle" (pointerdown)="onHandleClick()" (pointerup)="onMouseUp()">⋮⋮</div>
  }

  @if (src() === '') {
    <p>No Source Available</p>
  } @else {
    <div id="core" class="main core" [attr.data-id]="data.id">
      <iframe
        id="player"
        [style]="internalStyle()"
        scrolling="no"
        frameborder="no"
        allow="autoplay"
        [src]="src()"
        [style.pointer-events]="editMode ? 'none' : 'auto'"   
      ></iframe>
    </div>
  }
</div>
